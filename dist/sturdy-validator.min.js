/*
 *  Sturdy Validator - v0.0.1
 *  A validator that just works.
 *  https://github.com/sturdynut/sturdy-validator
 *
 *  Made by Matti Salokangas
 *  Under MIT License
 */
define(["jquery"],function(a){"use strict";var b=function(a,b){this.type=a,b&&(this.validate=b)};a.extend(b.prototype,{validate:function(){throw new Error("Validate is not implemented.")}});var c=function(){};a.extend(c.prototype,{settings:{DATA_PREFIX:"data-sturdy-val-",DATA_SELECTOR:"[data-sturdy-val]",DATA_TYPE:"sturdy-val-type",DATA_ON:"sturdy-val-on",enabled:!0,defaultEvent:"blur",defaultType:"email",pluginEnabled:!1,success:function(){console.log("Valid value.")},fail:function(){console.log("Invalid value.")},error:function(a){console.log(a)}},_validators:[],init:function(b){b=a.extend({},this.settings,b),this.DATA_PREFIX=b.DATA_PREFIX,this.DATA_SELECTOR=b.DATA_SELECTOR,this.DATA_TYPE=b.DATA_TYPE,this.DATA_ON=b.DATA_ON;var c=this,d=a(this.DATA_SELECTOR),e=d&&d.length>0;e&&(d.toArray().forEach(function(b){var d=a(b);c._validateElement(d,c._getOptionsForElement(d))}),b.pluginEnabled&&this._initPlugIn(b))},push:function(a,c){this._validators.push(new b(a,c))},_getOptionsForElement:function(a){var b=a.data(this.DATA_TYPE),c=a.data(this.DATA_ON);c&&(c=c.replace(","," "));var d={type:b,on:c};return d},_lookup:function(a){var b=this._validators.map(function(a){return a.type}).indexOf(a);return this._validators[b]},_validateElement:function(b,c){var d=this;b.on(c.on||this.settings.defaultEvent,function(){d._validate(a(this),c)})},_validateSelector:function(b,c){_validateElement(a(b),c)},_validate:function(b,c){c=a.extend({},c,this.settings);var d=this._lookup(c.type||this.settings.defaultType);try{(d.validate(b.val())?c.success:c.fail)()}catch(e){c.error(e)}},_initPlugIn:function(){}});var d=new c;return d.push("address",function(a){return a.length>5}),d.push("credit-card",function(a){if(/[^0-9-\s]+/.test(a))return!1;var b=0,c=0,d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;e>=0;e--){var f=a.charAt(e);c=parseInt(f,10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10===0}),d.push("date",function(a){return a.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)}),d.push("email",function(a){return a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)}),d.push("phone",function(a){return a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)}),d.push("social-security",function(a){return a.match(/^\d{3}-\d{2}-\d{4}$/)}),d.push("time",function(a){return a.match(/^\d{1,2}:\d{2}([ap]m)?$/)}),d});
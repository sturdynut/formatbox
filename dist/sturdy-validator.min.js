/*
 *  Sturdy Validator - v0.0.1
 *  A validator that just works.
 *  https://github.com/sturdynut/sturdy-validator
 *
 *  Made by Matti Salokangas
 *  Under MIT License
 */
!function(a,b){"use strict";var c=function(){this.DATA_PREFIX="data-sturdy-val-",this.DATA_SELECTOR="[data-sturdy-val]",this.DATA_TYPE="sturdy-val-type",this.DATA_ON="sturdy-val-on"};a.extend(c.prototype,{settings:{enabled:!0,defaultEvent:"blur",defaultType:"email",pluginEnabled:!1,success:function(){console.log("Valid value.")},fail:function(){console.log("Invalid value.")},error:function(a){console.log(a)}},init:function(b){b=a.extend({},this.settings,b);var c=this,d=a(this.DATA_SELECTOR),e=d&&d.length>0;e&&(d.toArray().forEach(function(b){var d=a(b);c._validateElement(d,c._getOptionsForElement(d))}),b.pluginEnabled&&this._initPlugIn(b))},_getOptionsForElement:function(a){var b=a.data(this.DATA_TYPE),c=a.data(this.DATA_ON);c&&(c=c.replace(","," "));var d={type:b,on:c};return d},_validators:function(){return Sturdy.Validator.Validators||[]},_validateElement:function(b,c){var d=this;b.on(c.on||this.settings.defaultEvent,function(){d._validate(a(this),c)})},_validateSelector:function(b,c){_validateElement(a(b),c)},_validate:function(b,c){c=a.extend({},c,this.settings);var d=Sturdy.Validator._lookup(c.type||this.settings.defaultType);try{(d.validate(b.val())?c.success:c.fail)()}catch(e){c.error(e)}},_lookup:function(a){var b=this._validators().map(function(a){return a.type}).indexOf(a);return this._validators()[b]},_initPlugIn:function(){function b(a){this.selector=a,this._name=c,this.init()}var c="validate";b.prototype.init=function(b){b=b||{};var c=a(selector);if(!(c.length>0))throw new Error("Element not found: "+selector);return Sturdy.Validator._validateSelector(selector,b),c},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}});var d=function(a,b){this.type=a,this.validate=b};d.prototype.type="base",d.prototype.validate=function(){throw new Error("Validate is not implemented.")},b.Sturdy=b.Sturdy||{},b.Sturdy.Validator=new c,b.Sturdy.Validator.Validators=[],b.Sturdy.Validator.ValidatorBase=d}(jQuery,window,document),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("address",function(a){return a.length>5})),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("credit-card",function(a){if(/[^0-9-\s]+/.test(a))return!1;var b=0,c=0,d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;e>=0;e--){var f=a.charAt(e),c=parseInt(f,10);d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10==0})),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("date",function(a){return a.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)})),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("email",function(a){return a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)})),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("email",function(a){return a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)})),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("social-security",function(a){return a.match(/^\d{3}-\d{2}-\d{4}$/)})),Sturdy.Validator.Validators.push(new Sturdy.Validator.ValidatorBase("time",function(a){return a.match(/^\d{1,2}:\d{2}([ap]m)?$/)}));
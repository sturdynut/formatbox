/*
 *  Sturdy Validator - v0.0.1
 *  A validator that just works.
 *  https://github.com/sturdynut/sturdy-validator
 *
 *  Made by Matti Salokangas
 *  Under MIT License
 */

!function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):root.SturdyValidator=factory(root.jQuery)}(this,function($){"use strict";function _make(instance){_extendPrototypes(instance),_addValidators(instance)}function _extendPrototypes(instance){$.extend(ValidatorFactory.prototype,{settings:{DATA_PREFIX:"data-sturdy-val-",DATA_SELECTOR:"[data-sturdy-val]",DATA_TYPE:"sturdy-val",DATA_ON:"sturdy-val-on",enabled:!0,defaultEvent:"blur",defaultType:"email",pluginEnabled:!1,success:function($el){$el.addClass("sturdy-val-success").removeClass("sturdy-val-error")},fail:function($el){$el.addClass("sturdy-val-error").removeClass("sturdy-val-success")},error:function(e){console.log(e)}},_validators:[],_sturdyValElements:[],init:function(options){options=$.extend({},instance.settings,options);var sturdyValElements=$(options.DATA_SELECTOR),needSturdy=sturdyValElements&&sturdyValElements.length>0,watch=instance._watchElement;needSturdy&&(this._sturdyValElements=sturdyValElements.toArray(),this._sturdyValElements.forEach(function(el){watch(el)}))},push:function(type,fn){this._validators.push(new BaseValidator(type,fn))},_watchElement:function(el){var $el=el.jquery?el:$(el),events=instance._getEventsForElement($el),type=$el.data(instance.settings.DATA_TYPE),defaultEvents=instance._getEventsForType(type),on=defaultEvents.concat(events.filter(function(e){return defaultEvents.indexOf(e)<0})).join(" ");$el.on(on,function(){instance._validate($el,type,$el.val())})},_getEventsForElement:function($el){var on=$el.data(instance.settings.DATA_ON);return on&&(on=on.split(",")),on||[]},_getEventsForType:function(type){var defaultEvents=["blur"];return"form"===type&&(defaultEvents=["submit"]),defaultEvents},_validate:function($el,type,value){var settings=instance.settings,validator=instance._lookup(type);try{var isValid=validator.isValid(value);isValid?settings.success($el):settings.fail($el)}catch(e){settings.error(e)}},_lookup:function(type){var index=instance._validators.map(function(validator){return validator.type}).indexOf(type);return instance._validators[index]}}),$.extend(BaseValidator.prototype,{isValid:function(){throw new Error("Validate is not implemented.")},_isMatch:function(value,regex){return regex.test(value)}})}var _instance=null,_getInstance=function(){return _instance||(_instance=new ValidatorFactory)},ValidatorFactory=function(){},BaseValidator=function(type,isValid){this.type=type,isValid&&(this.isValid=isValid)},_addValidators=function(instance){instance.push("address",function(value){return value.length>5}),instance.push("credit-card",function(value){if(/[^0-9-\s]+/.test(value))return!1;var nCheck=0,nDigit=0,bEven=!1;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10),bEven&&(nDigit*=2)>9&&(nDigit-=9),nCheck+=nDigit,bEven=!bEven}return nCheck%10===0}),instance.push("date",function(value){return this._isMatch(value,/^\d{1,2}\/\d{1,2}\/\d{4}$/)}),instance.push("email",function(value){return this._isMatch(value,/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/)}),instance.push("phone",function(value){return this._isMatch(value,/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)}),instance.push("social-security",function(value){return this._isMatch(value,/^\d{3}-\d{2}-\d{4}$/)}),instance.push("time",function(value){return this._isMatch(value,/^\d{1,2}:\d{2}([ap]m)?$/)}),instance.push("form",function(){var isValid=!0;return isValid})};return _make(_getInstance()),_getInstance()});
//# sourceMappingURL=sturdy-validator.min.js.map
/*
 *  Sturdy Validator - v0.0.1
 *  A validator that just works.
 *  https://github.com/sturdynut/sturdy-validator
 *
 *  Made by Matti Salokangas
 *  Under MIT License
 */
var SturdyValidator=function(a){"use strict";var b=null,c=function(){return new e},d=function(){return b||(b=c())},e=function(){};a.extend(e.prototype,{settings:{DATA_PREFIX:"data-sturdy-val-",DATA_SELECTOR:"[data-sturdy-val]",DATA_TYPE:"sturdy-val-type",DATA_ON:"sturdy-val-on",enabled:!0,defaultEvent:"blur",defaultType:"email",pluginEnabled:!1,success:function(a){a.addClass("sturdy-val-success").removeClass("sturdy-val-error")},fail:function(a){a.addClass("sturdy-val-error").removeClass("sturdy-val-success")},error:function(a){console.log(a)}},_validators:[],_sturdyValElements:[],init:function(b){b=a.extend({},d().settings,b);var c=a(b.DATA_SELECTOR),e=c&&c.length>0,f=d()._watchElement;e&&(this._sturdyValElements=c.toArray(),this._sturdyValElements.forEach(function(a){f(a)}))},push:function(a,b){this._validators.push(new f(a,b))},_watchElement:function(b){var c=b.jquery?b:a(b),e=d()._getEventsForElement(c),f=c.data(d().settings.DATA_TYPE),g=d()._getEventsForType(f),h=g.concat(e.filter(function(a){return g.indexOf(a)<0})).join(" ");c.on(h,function(){d()._validate(c,f,c.val())})},_getEventsForElement:function(a){var b=a.data(d().settings.DATA_ON);return b&&(b=b.split(",")),b||[]},_getEventsForType:function(a){var b=["blur"];return"form"===a&&(b=["submit"]),b},_validate:function(a,b,c){var e=d().settings,f=d()._lookup(b);try{var g=f.validate(c);g?e.success(a):e.fail(a)}catch(h){e.error(h)}},_lookup:function(a){var b=d()._validators.map(function(a){return a.type}).indexOf(a);return d()._validators[b]}});var f=function(a,b){this.type=a,b&&(this.validate=b)};return a.extend(f.prototype,{validate:function(){throw new Error("Validate is not implemented.")}}),d().push("address",function(a){return a.length>5}),d().push("credit-card",function(a){if(/[^0-9-\s]+/.test(a))return!1;var b=0,c=0,d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;e>=0;e--){var f=a.charAt(e);c=parseInt(f,10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10===0}),d().push("date",function(a){return a.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)}),d().push("email",function(a){return a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)}),d().push("phone",function(a){return a.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)}),d().push("social-security",function(a){return a.match(/^\d{3}-\d{2}-\d{4}$/)}),d().push("time",function(a){return a.match(/^\d{1,2}:\d{2}([ap]m)?$/)}),d().push("form",function(){var a=!0;return a}),{init:function(a){a=a||{},d().init(a)}}}(jQuery);